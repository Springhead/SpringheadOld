% 5.4.8.ConstDefs.tex
%	Last update: 2018/07/26 F.Kanehori
%\newpage
\subsubsection{定数定義クラス ConstDefs}
\label{subsubsec:ConstDefs}

\bigskip
\begin{Brief}[b]
	DailyBuildシステムで共通に使用する定数を提供するクラスである。
\end{Brief}

\bigskip
\noindent
\bf{クラス CFK}
\begin{narrow}
	\def\Row#1#2#3{\tt{#1}&\tt{#2}&\FCol{173pt}{#3}\\\hline}
	テスト制御ファイルで定義された値を参照するための定数。
	次のものがある。
	\Vskip{-.8\baselineskip}
	\begin{longtable}[r]{|l|l|l|}\hline
	    \MC{1}{|c}{\bf{定 数}} & \MC{1}{|c}{\bf{キーワード}}
	    			   & \MC{1}{|c|}{\bf{説 明}}\\\hline
	    \Row{SRCTOP}{SprTop}{%
	    		トップディレクトリ\\
			自動的に次の値に設定される\\
			\Path{.../Springhead}}
	    \Row{SPRTEST}{SprTest}{%
	    		テストディレクトリ\\
			自動的に次の値に設定される\\
			\Path{.../Springhead/core/test}}
	    \Row{EXCLUDE}{Exclude}{%
			このディレクトリをテストから除外するか否か\Note}
	    \Row{DESCEND}{Descend}{%
			サブディレクトリをテスト対象に組み込むか否か\Note}
	    \Row{SOLUTION_ALIAS}{SolutionAlias}{%
			solution/makeファイル名\\
			ファイル名がディレクトリ名と異なる場合に使用する}
	    \Row{BUILD}{Build}{コンパイルを実行するか否か\Note}
	    \Row{USE_CLOSED_SRC}{UseClosedSrc}{%
			Closed sourceを使用するか否か\Note}
	    \Row{MAKE_TARGET}{MakeTarget}{未使用}
	    \Row{CPP_MACRO}{CppMacro}{%
			コンパイル時マクロ ※未実装※}
	    \Row{BUILD_LOG}{BuildLog}{%
			コンパイルログファイル名\\
			\Path{\$(SprTest)/log/StubBuild.log}}
	    \Row{BUILD_ERR_LOG}{BuildErrLog}{%
			コンパイルエラーログファイル名\\
			\PathBgn{\$(SprTest)/log/}\Cont\\
			\hspace{3em}\PathEnd{StubBuildError.log}}
	    \Row{RUN}{Run}{テストプログラムを実行するか否か\Note}
	    \Row{OUTPUT_DIR}{OutputDir}{%
			バイナリ出力ディレクトリ名\\
			指定がなければsolution/makeファイルに従う}
	    \Row{BINARY_OUT}{BinaryOut}{%
			出力バイナリファイル名\\
			指定がなければsolution/makeファイルに従う}
	    \Row{TIMEOUT}{Timeout}{%
			テストプログラム実行時強制タイムアウト指定\\
			タイムアウトさせる秒数を指定する}
	    \Row{EXPECTED}{Expected}{%
			テストプログラム終了コードの予想値\\
			テストの合否判定に使用する}
	    \Row{ADD_PATH}{AddPath}{テストプログラム実行時に追加するパス}
	    \Row{PIPE_PROCESS}{PipeProcess}{%
			パイププロセス指定(実行するコマンドを記述する)。
			このプロセスの出力とテストプログラムの標準入力とが
			パイプで結ばれる。\\
			\bf{※} テストプログラムの出力を渡すパイププロセスも
			指定できると便利だが(出力のフィルタリング等)
			実装できていない}
	    \Row{KILL_PROCESS}{KillProcess}{%
			テストプログラム終了後にkillすべきプログラム\\
			プロセスイメージ名を指定する}
	    \Row{RUN_LOG}{RunLog}{%
			テスト実行ログファイル名\\
			\Path{\$(SprTest)/log/Run.log}}
	    \Row{RUN_ERR_LOG}{RunErrLog}{%
			テスト実行エラーログファイル名\\
			\Path{\$(SprTest)/log/RunError.log}}
	    \Row{INTERVENTION}{Intervention}{%
			テストプログラム実行時にオペレータ介入が必要\Note\\
			この値がTrueならこのテストプログラムは実行されない}
	\end{longtable}
	\Vskip{-\baselineskip}
	{\small \begin{Table}[t][15pt]{ll}
		\Item{\Hskip{5pt}\Dagger}{%
			論理値(TrueまたはFalse)を指定する。
			このキーワードを指定しなければFalseを、
			キーワードのみを指定すればTrueを指定したものとみなす。}
	\end{Table}}
\end{narrow}
\Vskip{-.5\baselineskip}

\noindent
\bf{クラス RST}
\begin{narrow}
	\def\Row#1#2{\tt{#1}&\FCol{287pt}{#2}\\\hline}
	テスト結果累積データのカテゴリを表す定数(enumeration型)。
	\Vskip{-.8\baselineskip}
	\begin{longtable}[r]{|p{4em}|l|}\hline
	    \MC{1}{|c}{\bf{定 数}} & \MC{1}{|c|}{\bf{説 明}}\\\hline
	    \Row{ERR}{エラー情報}
	    \Row{SKP}{スキップ情報\Hskip{5pt}
			(\KQuote{このテストは実行されなかった}という情報)}
	    \Row{BLD}{コンパイル結果情報}
	    \Row{RUN}{テスト実行結果情報}
	    \Row{EXP}{実行結果想定値情報}
	\end{longtable}
\end{narrow}

\noindent
\bf{クラス CSU}
\begin{narrow}
	\def\Row#1#2{\tt{#1}&\FCol{287pt}{#2}\\\hline}
	非公開ソースを使用するか否かを表す定数(enumeration型)。
	\Vskip{-.8\baselineskip}
	\begin{longtable}[r]{|p{4em}|l|}\hline
	    \MC{1}{|c}{\bf{定 数}} & \MC{1}{|c|}{\bf{説 明}}\\\hline
	    \Row{AUTO}{個別にテスト制御ファイルに従う}
	    \Row{USE}{すべてで使用する}
	    \Row{UNUSE}{すべてで使用しない}
	\end{longtable}
\end{narrow}

\noindent
\bf{クラス TESTID}
\begin{narrow}
	\def\Row#1#2{\tt{#1}&\FCol{287pt}{#2}\\\hline}
	テスト種別を表す定数(enumeration型)。
	\Vskip{-.8\baselineskip}
	\begin{longtable}[r]{|p{4em}|l|}\hline
	    \MC{1}{|c}{\bf{定 数}} & \MC{1}{|c|}{\bf{説 明}}\\\hline
	    \Row{STUB}{Springheadライブラリ作成}
	    \Row{TESTS}{\Path{src/tests}のテスト}
	    \Row{SAMPLES}{\Path{src/Samples}のテスト}
	    \Row{OTHER}{上記以外}
	\end{longtable}
\end{narrow}

\noindent
\bf{その他の定数}
\begin{narrow}
	\def\Row#1#2{\tt{#1}&\FCol{287pt}{#2}\\\hline}
	\Vskip{-.8\baselineskip}
	\begin{longtable}[r]{|p{4em}|l|}\hline
	    \MC{1}{|c}{\bf{定 数}} & \MC{1}{|c|}{\bf{説 明}}\\\hline
	    \Row{PLATS}{プラットフォームの一覧リスト(\tt{x86, x64})}
	    \Row{CONFS}{%
	    	ビルド構成の一覧リスト(\tt{Debug, Release, Trace})}
	\end{longtable}
\end{narrow}

% end: 5.4.8.ConstDefs.tex
